{"version":3,"sources":["../../../../graphql/schema/book/_query.js"],"names":["Query","gql","queryTypes","queryResolvers","books","_","filter","bookModel","find","map","book","toGraph","id","findById"],"mappings":";;;;;;;AAAA;;AAEA;;;;AAEA,MAAMA,KAAK,GAAGC,wBAAI;;;;;CAAlB;;AAOO,MAAMC,UAAU,GAAG,MAAM,CAACF,KAAD,CAAzB;;;AAEA,MAAMG,cAAc,GAAG;AAC5BH,EAAAA,KAAK,EAAE;AACLI,IAAAA,KAAK,EAAE,OAAOC,CAAP,EAAU;AAAEC,MAAAA,MAAM,GAAG;AAAX,KAAV,KAA8B;AACnC,YAAMF,KAAK,GAAG,MAAMG,eAAUC,IAAV,CAAe,EAAf,EAAmB,IAAnB,EAAyBF,MAAzB,CAApB;AACA,aAAOF,KAAK,CAACK,GAAN,CAAUC,IAAI,IAAIA,IAAI,CAACC,OAAL,EAAlB,CAAP;AACD,KAJI;AAKLD,IAAAA,IAAI,EAAE,OAAOL,CAAP,EAAU;AAAEO,MAAAA;AAAF,KAAV,KAAqB;AACzB,YAAMF,IAAI,GAAG,MAAMH,eAAUM,QAAV,CAAmBD,EAAnB,CAAnB;AACA,aAAOF,IAAI,CAACC,OAAL,EAAP;AACD;AARI;AADqB,CAAvB","sourcesContent":["import { gql } from 'apollo-server-express';\n\nimport bookModel from './_model';\n\nconst Query = gql`\n  extend type Query {\n    books(filter: booksFilterInput): [Book]\n    book(id: String!): Book\n  }\n`;\n\nexport const queryTypes = () => [Query];\n\nexport const queryResolvers = {\n  Query: {\n    books: async (_, { filter = {} }) => {\n      const books = await bookModel.find({}, null, filter);\n      return books.map(book => book.toGraph());\n    },\n    book: async (_, { id }) => {\n      const book = await bookModel.findById(id);\n      return book.toGraph();\n    }\n  }\n};\n"],"file":"_query.js"}